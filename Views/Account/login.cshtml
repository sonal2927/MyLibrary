@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- FontAwesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

<div class="container min-vh-100 d-flex justify-content-center align-items-center">
    <div class="col-md-6 col-lg-5 p-5 shadow-lg rounded-4 bg-white glass-effect animate__animated animate__fadeIn">

        <!-- ðŸ”’ Header -->
        <div class="text-center mb-4">
            <i class="fa-solid fa-lock fa-2x text-primary mb-2"></i>
            <h2 class="fw-bold text-dark">Welcome Back</h2>
            <p class="text-muted">Sign in to continue to your library account</p>
        </div>

        <!-- âŒ Error Message -->
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger text-center alert-dismissible fade show" role="alert">
                @ViewBag.Error
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        <!-- ðŸ” Login Form -->
        <form asp-action="Login" method="post" class="needs-validation" novalidate>

            <!-- ðŸ”˜ Role -->
            <div class="form-group mb-3">
                <label for="Role" class="form-label fw-semibold">Login as</label>
                <select class="form-select shadow-sm" id="Role" name="Role" required>
                    <option value="">-- Select Role --</option>
                    <option value="Student">Student</option>
                    <option value="Faculty">Faculty</option>
                    <option value="Admin">Admin</option>
                    <option value="Librarian">Librarian</option>
                </select>
                <div class="invalid-feedback">Please select your role.</div>
            </div>

            <!-- ðŸªª Login ID -->
            <div class="form-group mb-3">
                <label for="LoginId" class="form-label fw-semibold">Login ID</label>
                <div class="input-group shadow-sm">
                    <span class="input-group-text bg-light"><i class="fa-solid fa-id-card"></i></span>
                    <input type="text" class="form-control" id="LoginId" name="LoginId" placeholder="Enter your Login ID" required />
                </div>
                <div class="invalid-feedback">Please enter your Login ID.</div>
            </div>

            <!-- ðŸ”‘ Password -->
            <div class="form-group mb-3">
                <label for="Password" class="form-label fw-semibold">Password</label>
                <div class="input-group shadow-sm">
                    <span class="input-group-text bg-light"><i class="fa-solid fa-key"></i></span>
                    <input type="password" class="form-control" id="Password" name="Password" placeholder="Enter your password" required />
                </div>
                <div class="invalid-feedback">Please enter your password.</div>
            </div>

            <!-- Forgot -->
            <div class="text-end mb-3">
                <a href="/Account/ForgotPassword" class="small text-primary text-decoration-none">Forgot Password?</a>
            </div>

            <!-- ðŸ”˜ Login Button -->
            <div class="d-grid mb-3">
                <button type="submit" class="btn btn-primary btn-lg shadow-sm">
                    <i class="fa-solid fa-arrow-right-to-bracket me-1"></i> Login
                </button>
            </div>
        </form>

        <!-- Register -->
        <div class="text-center mt-3">
            <span class="text-muted">New user?</span>
            <a href="/Account/Register" class="fw-semibold text-primary text-decoration-none">Create an account</a>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        (() => {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(form => {
                form.addEventListener('submit', e => {
                    if (!form.checkValidity()) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            })();
        })();
    </script>
}

@section Styles {
    <style>
        body {
            background: linear-gradient(135deg, #f0f4ff, #d9e6ff);
            font-family: 'Segoe UI', sans-serif;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .form-control:focus, .form-select:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
        }

        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }

        .btn-primary:hover {
            background-color: #0b5ed7;
        }

        .input-group-text {
            min-width: 42px;
        }

        .btn-close:focus {
            box-shadow: none;
        }
    </style>
}
